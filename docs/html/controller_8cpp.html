<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rt2_assignment1: src/controller.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rt2_assignment1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">ros package for a mobile robot and its navigation through a simple environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">controller.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Controller for the mobile robot simulation in rviz and Gazebo.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;termios.h&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;rt2_first_assignment/utils.h&quot;</code><br />
<code>#include &quot;rt2_first_assignment/controller_class.h&quot;</code><br />
<code>#include &lt;actionlib/client/simple_action_client.h&gt;</code><br />
<code>#include &lt;actionlib/client/terminal_state.h&gt;</code><br />
<code>#include &lt;actionlib_msgs/GoalID.h&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseAction.h&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseFeedback.h&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseActionGoal.h&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseActionFeedback.h&gt;</code><br />
<code>#include &lt;boost/bind.hpp&gt;</code><br />
<code>#include &quot;rt2_first_assignment/Change_mode_service.h&quot;</code><br />
<code>#include &quot;rt2_first_assignment/Set_goal_service.h&quot;</code><br />
<code>#include &quot;geometry_msgs/Point.h&quot;</code><br />
<code>#include &quot;geometry_msgs/Twist.h&quot;</code><br />
<code>#include &quot;sensor_msgs/LaserScan.h&quot;</code><br />
<code>#include &quot;std_msgs/Int32.h&quot;</code><br />
<code>#include &quot;std_msgs/String.h&quot;</code><br />
<code>#include &quot;std_msgs/Bool.h&quot;</code><br />
<code>#include &lt;std_srvs/SetBool.h&gt;</code><br />
<code>#include &lt;ros/callback_queue.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for controller.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="controller_8cpp__incl.png" border="0" usemap="#src_2controller_8cpp" alt=""/></div>
<map name="src_2controller_8cpp" id="src_2controller_8cpp">
<area shape="rect" title="Controller for the mobile robot simulation in rviz and Gazebo." alt="" coords="1951,5,2086,32"/>
<area shape="rect" title=" " alt="" coords="763,177,842,203"/>
<area shape="rect" title=" " alt="" coords="5,177,80,203"/>
<area shape="rect" title=" " alt="" coords="571,177,655,203"/>
<area shape="rect" title=" " alt="" coords="104,177,179,203"/>
<area shape="rect" title=" " alt="" coords="2578,87,2643,114"/>
<area shape="rect" title=" " alt="" coords="680,177,739,203"/>
<area shape="rect" title=" " alt="" coords="2667,87,2735,114"/>
<area shape="rect" href="utils_8h_source.html" title=" " alt="" coords="346,80,502,121"/>
<area shape="rect" href="controller__class_8h_source.html" title=" " alt="" coords="1941,80,2097,121"/>
<area shape="rect" title=" " alt="" coords="866,177,1025,203"/>
<area shape="rect" title=" " alt="" coords="1049,177,1225,203"/>
<area shape="rect" title=" " alt="" coords="1249,177,1439,203"/>
<area shape="rect" title=" " alt="" coords="1463,177,1596,203"/>
<area shape="rect" title=" " alt="" coords="1620,177,1759,203"/>
<area shape="rect" title=" " alt="" coords="1783,177,1913,203"/>
<area shape="rect" title=" " alt="" coords="1937,169,2103,211"/>
<area shape="rect" title=" " alt="" coords="2417,169,2594,211"/>
<area shape="rect" title=" " alt="" coords="2618,177,2798,203"/>
<area shape="rect" title=" " alt="" coords="2823,177,3087,203"/>
<area shape="rect" title=" " alt="" coords="3111,169,3363,211"/>
<area shape="rect" title=" " alt="" coords="3388,177,3673,203"/>
<area shape="rect" title=" " alt="" coords="3697,177,3815,203"/>
<area shape="rect" title=" " alt="" coords="3839,169,4025,211"/>
<area shape="rect" title=" " alt="" coords="4049,169,4205,211"/>
<area shape="rect" title=" " alt="" coords="4229,177,4371,203"/>
<area shape="rect" title=" " alt="" coords="2759,80,3011,121"/>
<area shape="rect" title=" " alt="" coords="3036,87,3212,114"/>
<area shape="rect" title=" " alt="" coords="203,177,283,203"/>
<area shape="rect" title=" " alt="" coords="307,177,368,203"/>
<area shape="rect" title=" " alt="" coords="392,177,456,203"/>
<area shape="rect" title=" " alt="" coords="480,177,547,203"/>
<area shape="rect" title=" " alt="" coords="2128,177,2392,203"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmin_distances.html">minDistances</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure representing the MINIMUM distances of obstacles around the robot.  <a href="structmin_distances.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top"><a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acecdd1cee07d3cb74838dcf03e6b6dcc"><td class="memItemLeft" align="right" valign="top"><a id="acecdd1cee07d3cb74838dcf03e6b6dcc"></a>
**const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8cpp.html#acecdd1cee07d3cb74838dcf03e6b6dcc">TEXT_DELAY</a> = 25000</td></tr>
<tr class="memdesc:acecdd1cee07d3cb74838dcf03e6b6dcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">World time interval for complete our action in reaching the goal. <br /></td></tr>
<tr class="separator:acecdd1cee07d3cb74838dcf03e6b6dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94419b818e97f48250e54dc38a7e2052"><td class="memItemLeft" align="right" valign="top"><a id="a94419b818e97f48250e54dc38a7e2052"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8cpp.html#a94419b818e97f48250e54dc38a7e2052">actionTimeout</a></td></tr>
<tr class="memdesc:a94419b818e97f48250e54dc38a7e2052"><td class="mdescLeft">&#160;</td><td class="mdescRight">temporal variable for setting the parameter server variable of the time interval for the complition of the action. <br /></td></tr>
<tr class="separator:a94419b818e97f48250e54dc38a7e2052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c4d79c1b4b74f0c25752d8c6e7b316"><td class="memItemLeft" align="right" valign="top"><a id="ae4c4d79c1b4b74f0c25752d8c6e7b316"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8cpp.html#ae4c4d79c1b4b74f0c25752d8c6e7b316">brakethreshold</a></td></tr>
<tr class="memdesc:ae4c4d79c1b4b74f0c25752d8c6e7b316"><td class="mdescLeft">&#160;</td><td class="mdescRight">temporal variable for setting the parameter server variable of the minimal distances from the wall. <br /></td></tr>
<tr class="separator:ae4c4d79c1b4b74f0c25752d8c6e7b316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc776906e911f45434d307a992ecf233"><td class="memItemLeft" align="right" valign="top"><a id="abc776906e911f45434d307a992ecf233"></a>
move_base_msgs::MoveBaseGoal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="controller_8cpp.html#abc776906e911f45434d307a992ecf233">goal</a></td></tr>
<tr class="memdesc:abc776906e911f45434d307a992ecf233"><td class="mdescLeft">&#160;</td><td class="mdescRight">topic which to publish for setting our goal to <br /></td></tr>
<tr class="separator:abc776906e911f45434d307a992ecf233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59255cfa090da762403f35562541fe8"><td class="memItemLeft" align="right" valign="top"><a id="ac59255cfa090da762403f35562541fe8"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><b>ACTION_TIMEOUT_DEFAULT</b> = 30.0</td></tr>
<tr class="separator:ac59255cfa090da762403f35562541fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1727e065c6c73d57999b646fb5849511"><td class="memItemLeft" align="right" valign="top"><a id="a1727e065c6c73d57999b646fb5849511"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><b>BRAKE_THRESHOLD_DEFAULT</b> = 1.0</td></tr>
<tr class="separator:a1727e065c6c73d57999b646fb5849511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afccade0bbf6cd9d0a304da622cd0ead6"><td class="memItemLeft" align="right" valign="top"><a id="afccade0bbf6cd9d0a304da622cd0ead6"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><b>GOAL_TH</b> = 0.5</td></tr>
<tr class="separator:afccade0bbf6cd9d0a304da622cd0ead6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Controller for the mobile robot simulation in rviz and Gazebo. </p>
<dl class="section author"><dt>Author</dt><dd>Mattia Piras </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>14/03/2022</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rt1a3_action_timeout</td><td>Define the time interval within the action can finish. Otherwise an error occurs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rt1a3_brake_threshold</td><td>Define the minum distance which the robot has to be considered in a safe zone from.</td></tr>
  </table>
  </dd>
</dl>
<p>Subscribes to: <br  />
 ° /subCmdVelRemapped ° /subScanner ° /subMode</p>
<p>Publishes to: <br  />
 ° /pubStateInfo ° /pubCmdVel ° /pubTimeout</p>
<p>Services : <br  />
 ° /service_mode ° /service_goal</p>
<p>Description :</p>
<p>This node simulates a mobile robot inside an environment. The User has the possibility play with the simulation in three ways: The first is letting the robot drive towards a goal that he/her has inserted at the beginning of the simulation. In this case the user can cancel the goal by pressing a button The second way is letting the user guiding the robot vua keyboard The third one is related to the second but with the difference that the user is assisted during the controlling of the robot, so certain directions are not allowed (e.g. because of a wall) </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
